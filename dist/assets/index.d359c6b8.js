var Ot=Object.defineProperty,zt=Object.defineProperties;var Et=Object.getOwnPropertyDescriptors;var Ce=Object.getOwnPropertySymbols;var kt=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable;var Le=(e,t,r)=>t in e?Ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,z=(e,t)=>{for(var r in t||(t={}))kt.call(t,r)&&Le(e,r,t[r]);if(Ce)for(var r of Ce(t))Rt.call(t,r)&&Le(e,r,t[r]);return e},J=(e,t)=>zt(e,Et(t));import{t as _e,w as u,V as ie,R as jt,P as Gt,a as T,I as fe,W as $t,O as It,d as o,b as At,i as X,c as Ft,e as Bt,S as Dt,p as Tt,C as V,T as Ut,g as Ht,G as Vt,f as qt,h as Wt,L as Xt,j as Zt,o as Kt,M as Yt,B as Jt,k as Qt,l as Me,m as er,n as tr,q as rr,D as sr,E as ir,r as nr,s as ar,u as or,v as Ne,x as hr,y as dr,z as ur,A as cr,F as lr,H as fr,J as mr,K as pr,N as Oe,Q as gr,U as me,X as pe,Y as yr,Z as br,_ as vr,$ as wr,a0 as Sr,a1 as xr,a2 as ze,a3 as Pr,a4 as Cr,a5 as Lr,a6 as _r,a7 as Mr,a8 as Nr,a9 as Or,aa as ne,ab as zr,ac as ge,ad as Z,ae as Ee,af as Er,ag as kr,ah as Rr,ai as jr,aj as Gr,ak as $r,al as Ir,am as Ar,an as Fr,ao as Br,ap as Dr,aq as Tr,ar as Ur,as as Hr,at as Vr,au as qr,av as Wr,aw as ae,ax as Xr,ay as Zr,az as Kr,aA as Yr,aB as Jr,aC as Qr,aD as j,aE as es,aF as oe,aG as N,aH as G,aI as ke,aJ as ts,aK as rs}from"./vendor.87ef46fe.js";const ss=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}};ss();function Re(e,t,r){t instanceof Object&&Object.entries(t).forEach(([s,i])=>{r?r(e,s,i):e[s]=i})}function q(e,t,r,s=!0,i){s&&Re(r,e[t],i);const a=_e(e,t);return u(a,n=>{Re(r,n,i)})}function he(e,t){t instanceof Object&&Object.entries(t).forEach(([r,s])=>{e[r]=s})}function w(e,t,r,s){const i=s||t,a=_e(e,t);a.value instanceof Object?(he(r[i],a.value),u(a,n=>{he(r[i],n)},{deep:!0})):(a.value!==void 0&&(r[i]=e[t]),u(a,n=>{r[i]=n}))}function ye(e,t=[]){const r={};return Object.entries(e).forEach(([s,i])=>{(!t||!t.includes(s))&&(r[s]=i)}),r}const is="https://rawcdn.githack.com/emmelleppi/matcaps/9b36ccaaf0a24881a39062d05566c9e92be4aa0d",ns="0404E8_0404B5_0404CB_3333FC";function as(e=ns,t=1024){const r=`${e}${os(t)}.png`;return`${is}/${t}/${r}`}function os(e){switch(e){case 64:return"-64px";case 128:return"-128px";case 256:return"-256px";case 512:return"-512px";default:return""}}function hs(e){const{camera:t,resetPosition:r=new ie(0,0,0)}=e,s=new jt,i=r.clone(),a=new Gt(new ie(0,0,1),0);return{position:i,updatePosition:S=>{s.setFromCamera(S,t),t.getWorldDirection(a.normal),s.ray.intersectPlane(a,i)},intersect:(S,x,f=!1)=>(s.setFromCamera(S,t),s.intersectObjects(x,f))}}function je(e){const{camera:t,domElement:r,intersectObjects:s,intersectRecursive:i=!1,touch:a=!0,resetOnEnd:n=!1,onEnter:m=()=>{},onMove:S=()=>{},onLeave:x=()=>{},onClick:f=()=>{},onIntersectEnter:_=()=>{},onIntersectOver:M=()=>{},onIntersectMove:b=()=>{},onIntersectLeave:A=()=>{},onIntersectClick:F=()=>{}}=e,p=new T(0,0),y=new T(0,0),E=hs({camera:t}),h=E.position,c={position:p,positionN:y,positionV3:h,intersectObjects:s,listeners:!1,addListeners:Mt,removeListeners:Nt,intersect:ve};return c;function O(){p.set(0,0),y.set(0,0),h.set(0,0,0)}function P(g){let L,B;g.touches&&g.touches.length>0?(L=g.touches[0].clientX,B=g.touches[0].clientY):(L=g.clientX,B=g.clientY);const k=r.getBoundingClientRect();p.x=L-k.left,p.y=B-k.top,y.x=p.x/k.width*2-1,y.y=-(p.y/k.height)*2+1,E.updatePosition(y)}function ve(){const g=Se();if(g.length){const L=E.intersect(y,g,i),B=[...g],k=[];L.forEach(R=>{var D,Y,xe;const{object:l}=R,d=ce(l);if(l instanceof fe){if(k.indexOf(l)!==-1)return;k.push(l)}if(!l.userData.over){l.userData.over=!0;const le={type:"pointerover",over:!0,component:d,intersect:R},Pe=J(z({},le),{type:"pointerenter"});M(le),_(Pe),(D=d==null?void 0:d.onPointerOver)==null||D.call(d,le),(Y=d==null?void 0:d.onPointerEnter)==null||Y.call(d,Pe)}const H={type:"pointermove",component:d,intersect:R};b(H),(xe=d==null?void 0:d.onPointerMove)==null||xe.call(d,H),B.splice(B.indexOf(l),1)}),B.forEach(R=>{var d,H;const l=ce(R);if(R.userData.over){R.userData.over=!1;const D={type:"pointerover",over:!1,component:l},Y=J(z({},D),{type:"pointerleave"});M(D),A(Y),(d=l==null?void 0:l.onPointerOver)==null||d.call(l,D),(H=l==null?void 0:l.onPointerLeave)==null||H.call(l,Y)}})}}function te(g){P(g),m({type:"pointerenter",position:p,positionN:y,positionV3:h})}function re(g){P(g),S({type:"pointermove",position:p,positionN:y,positionV3:h}),ve()}function we(g){P(g);const L=Se();if(L.length){const B=E.intersect(y,L,i),k=[];B.forEach(R=>{var D;const{object:l}=R,d=ce(l);if(l instanceof fe){if(k.indexOf(l)!==-1)return;k.push(l)}const H={type:"click",component:d,intersect:R};F(H),(D=d==null?void 0:d.onClick)==null||D.call(d,H)})}f({type:"click",position:p,positionN:y,positionV3:h})}function se(){n&&O(),x({type:"pointerleave"})}function ce(g){if(g.userData.component)return g.userData.component;let L=g.parent;for(;L;){if(L.userData.component)return L.userData.component;L=L.parent}}function Se(){return typeof s=="function"?s():s}function Mt(){r.addEventListener("mouseenter",te),r.addEventListener("mousemove",re),r.addEventListener("mouseleave",se),r.addEventListener("click",we),a&&(r.addEventListener("touchstart",te),r.addEventListener("touchmove",re),r.addEventListener("touchend",se)),c.listeners=!0}function Nt(){r.removeEventListener("mouseenter",te),r.removeEventListener("mousemove",re),r.removeEventListener("mouseleave",se),r.removeEventListener("click",we),r.removeEventListener("touchstart",te),r.removeEventListener("touchmove",re),r.removeEventListener("touchend",se),c.listeners=!1}}function ds(e){const t={antialias:!0,alpha:!1,autoClear:!0,orbitCtrl:!1,pointer:!1,resize:!1,width:300,height:150};e&&Object.entries(e).forEach(([h,c])=>{t[h]=c});const r={width:1,height:1,wWidth:1,wHeight:1,ratio:1},s=[],i=[],a=m(),n={config:t,renderer:a,size:r,init:S,dispose:F,render:_,renderC:M,setSize:y,addIntersectObject:b,removeIntersectObject:A};return n;function m(){const h=new $t(z({canvas:t.canvas,antialias:t.antialias,alpha:t.alpha},t.params));return h.autoClear=t.autoClear,h}function S(){if(!n.scene)return console.error("Missing Scene"),!1;if(!n.camera)return console.error("Missing Camera"),!1;if(t.resize?(p(),window.addEventListener("resize",p)):t.width&&t.height&&y(t.width,t.height),x(),t.orbitCtrl){const h=new It(n.camera,n.renderer.domElement);t.orbitCtrl instanceof Object&&Object.entries(t.orbitCtrl).forEach(([c,O])=>{h[c]=O}),f(()=>{h.update()}),n.cameraCtrl=h}return!0}function x(){let h={camera:n.camera,domElement:n.renderer.domElement,intersectObjects:i};t.pointer&&t.pointer instanceof Object&&(h=z(z({},h),t.pointer));const c=n.pointer=je(h);(t.pointer||i.length)&&(c.addListeners(),h.intersectMode==="frame"&&f(c.intersect))}function f(h){s.push(h)}function _(){s.forEach(h=>h()),n.renderer.render(n.scene,n.camera)}function M(){s.forEach(h=>h()),n.composer.render()}function b(h){i.indexOf(h)===-1&&i.push(h),n.pointer&&!n.pointer.listeners&&n.pointer.addListeners()}function A(h){const c=i.indexOf(h);c!==-1&&i.splice(c,1),n.pointer&&!t.pointer&&i.length===0&&n.pointer.removeListeners()}function F(){window.removeEventListener("resize",p),n.pointer&&n.pointer.removeListeners(),n.cameraCtrl&&n.cameraCtrl.dispose(),n.renderer&&n.renderer.dispose()}function p(){var h;if(t.resize==="window")y(window.innerWidth,window.innerHeight);else{const c=n.renderer.domElement.parentNode;c&&y(c.clientWidth,c.clientHeight)}(h=t.onResize)==null||h.call(t,r)}function y(h,c){r.width=h,r.height=c,r.ratio=h/c,n.renderer.setSize(h,c,!1);const O=n.camera;if(O.type==="PerspectiveCamera"){const P=O;P.aspect=r.ratio,P.updateProjectionMatrix()}if(O.type==="OrthographicCamera"){const P=O;r.wWidth=P.right-P.left,r.wHeight=P.top-P.bottom}else{const P=E();r.wWidth=P[0],r.wHeight=P[1]}}function E(){const h=n.camera,c=h.fov*Math.PI/180,O=2*Math.tan(c/2)*Math.abs(h.position.z);return[O*h.aspect,O]}}const U=Symbol("Renderer");var us=o({name:"Renderer",props:{params:{type:Object,default:()=>({})},antialias:Boolean,alpha:Boolean,autoClear:{type:Boolean,default:!0},orbitCtrl:{type:[Boolean,Object],default:!1},pointer:{type:[Boolean,Object],default:!1},resize:{type:[Boolean,String],default:!1},shadow:Boolean,width:String,height:String,pixelRatio:Number,xr:Boolean,props:{type:Object,default:()=>({})},onReady:Function},inheritAttrs:!1,setup(e,{attrs:t}){const r=[],s=[],i=[],a=[],n=[],m=document.createElement("canvas");Object.entries(t).forEach(([_,M])=>{const b=_.match(/^on([A-Z][a-zA-Z]*)$/);b?m.addEventListener(b[1].toLowerCase(),M):m.setAttribute(_,M)});const S={canvas:m,params:e.params,antialias:e.antialias,alpha:e.alpha,autoClear:e.autoClear,orbitCtrl:e.orbitCtrl,pointer:e.pointer,resize:e.resize};e.width&&(S.width=parseInt(e.width)),e.height&&(S.height=parseInt(e.height));const x=ds(S);q(e,"props",x.renderer),At(()=>{e.pixelRatio&&x.renderer.setPixelRatio(e.pixelRatio)});const f=()=>{};return{canvas:m,three:x,renderer:x.renderer,size:x.size,renderFn:f,raf:!0,initCallbacks:r,mountedCallbacks:s,beforeRenderCallbacks:i,afterRenderCallbacks:a,resizeCallbacks:n}},computed:{camera:{get:function(){return this.three.camera},set:function(e){this.three.camera=e}},scene:{get:function(){return this.three.scene},set:function(e){this.three.scene=e}},composer:{get:function(){return this.three.composer},set:function(e){this.three.composer=e}}},provide(){return{[U]:this}},mounted(){var e;this.$el.parentNode.insertBefore(this.canvas,this.$el),this.three.init()&&(this.three.pointer&&(this.$pointer=this.three.pointer),this.three.config.onResize=t=>{this.resizeCallbacks.forEach(r=>r({type:"resize",renderer:this,size:t}))},this.shadow&&(this.renderer.shadowMap.enabled=!0),this.renderFn=this.three.composer?this.three.renderC:this.three.render,this.initCallbacks.forEach(t=>t({type:"init",renderer:this})),(e=this.onReady)==null||e.call(this,this),this.xr?(this.renderer.xr.enabled=!0,this.renderer.setAnimationLoop(this.render)):requestAnimationFrame(this.renderLoop)),this.mountedCallbacks.forEach(t=>t({type:"mounted",renderer:this}))},beforeUnmount(){this.canvas.remove(),this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[],this.raf=!1,this.three.dispose()},methods:{onInit(e){this.addListener("init",e)},onMounted(e){this.addListener("mounted",e)},onBeforeRender(e){this.addListener("beforerender",e)},offBeforeRender(e){this.removeListener("beforerender",e)},onAfterRender(e){this.addListener("afterrender",e)},offAfterRender(e){this.removeListener("afterrender",e)},onResize(e){this.addListener("resize",e)},offResize(e){this.removeListener("resize",e)},addListener(e,t){this.getCallbacks(e).push(t)},removeListener(e,t){const r=this.getCallbacks(e),s=r.indexOf(t);s!==-1&&r.splice(s,1)},getCallbacks(e){return e==="init"?this.initCallbacks:e==="mounted"?this.mountedCallbacks:e==="beforerender"?this.beforeRenderCallbacks:e==="afterrender"?this.afterRenderCallbacks:this.resizeCallbacks},render(e){this.beforeRenderCallbacks.forEach(t=>t({type:"beforerender",renderer:this,time:e})),this.renderFn({renderer:this,time:e}),this.afterRenderCallbacks.forEach(t=>t({type:"afterrender",renderer:this,time:e}))},renderLoop(e){this.raf&&requestAnimationFrame(this.renderLoop),this.render(e)}},render(){return this.$slots.default?this.$slots.default():[]},__hmrId:"Renderer"}),Ge=o({props:{props:{type:Object,default:()=>({})}},render(){return this.$slots.default?this.$slots.default():[]}});function de(e,t,r,s=!0){e[t]=r,s&&e.updateProjectionMatrix()}o({extends:Ge,name:"OrthographicCamera",props:{left:{type:Number,default:-1},right:{type:Number,default:1},top:{type:Number,default:1},bottom:{type:Number,default:-1},near:{type:Number,default:.1},far:{type:Number,default:2e3},zoom:{type:Number,default:1},position:{type:Object,default:()=>({x:0,y:0,z:0})}},setup(e){const t=X(U);if(!t){console.error("Renderer not found");return}const r=new Ft(e.left,e.right,e.top,e.bottom,e.near,e.far);return t.camera=r,w(e,"position",r),q(e,"props",r,!0,de),["left","right","top","bottom","near","far","zoom"].forEach(s=>{u(()=>e[s],i=>{de(r,s,i)})}),{renderer:t,camera:r}},__hmrId:"OrthographicCamera"});var cs=o({extends:Ge,name:"PerspectiveCamera",props:{aspect:{type:Number,default:1},far:{type:Number,default:2e3},fov:{type:Number,default:50},near:{type:Number,default:.1},position:{type:Object,default:()=>({x:0,y:0,z:0})},lookAt:{type:Object,default:null}},setup(e){var s;const t=X(U);if(!t){console.error("Renderer not found");return}const r=new Bt(e.fov,e.aspect,e.near,e.far);return t.camera=r,w(e,"position",r),e.lookAt&&r.lookAt((s=e.lookAt.x)!=null?s:0,e.lookAt.y,e.lookAt.z),u(()=>e.lookAt,i=>{var a;r.lookAt((a=i.x)!=null?a:0,i.y,i.z)},{deep:!0}),q(e,"props",r,!0,de),["aspect","far","fov","near"].forEach(i=>{u(()=>e[i],a=>{de(r,i,a)})}),{renderer:t,camera:r}},__hmrId:"PerspectiveCamera"});const $e=Symbol("Scene");var ls=o({name:"Scene",props:{background:[String,Number,Object]},setup(e){const t=X(U),r=new Dt;if(!t){console.error("Renderer not found");return}t.scene=r,Tt($e,r);const s=n=>{!n||(typeof n=="string"||typeof n=="number"?r.background instanceof V?r.background.set(n):r.background=new V(n):n instanceof Ut&&(r.background=n))};return s(e.background),u(()=>e.background,s),{scene:r,add:n=>{r.add(n)},remove:n=>{r.remove(n)}}},render(){return this.$slots.default?this.$slots.default():[]},__hmrId:"Scene"});const fs={onPointerEnter:Function,onPointerOver:Function,onPointerMove:Function,onPointerLeave:Function,onPointerDown:Function,onPointerUp:Function,onClick:Function};var W=o({name:"Object3D",inject:{renderer:U,scene:$e},emits:["created","ready"],props:z({position:{type:Object,default:()=>({x:0,y:0,z:0})},rotation:{type:Object,default:()=>({x:0,y:0,z:0})},scale:{type:Object,default:()=>({x:1,y:1,z:1,order:"XYZ"})},lookAt:{type:Object,default:null},userData:{type:Object,default:()=>({})},visible:{type:Boolean,default:!0},props:{type:Object,default:()=>({})},disableAdd:{type:Boolean,default:!1},disableRemove:{type:Boolean,default:!1}},fs),setup(){return{}},created(){this.renderer||console.error("Missing parent Renderer"),this.scene||console.error("Missing parent Scene")},unmounted(){this.disableRemove||this.removeFromParent(),this.o3d&&this.renderer&&this.renderer.three.removeIntersectObject(this.o3d)},methods:{initObject3D(e){var t;this.o3d=e,e.userData.component=this,(this.onPointerEnter||this.onPointerOver||this.onPointerMove||this.onPointerLeave||this.onPointerDown||this.onPointerUp||this.onClick)&&this.renderer&&this.renderer.three.addIntersectObject(e),w(this,"position",e),w(this,"rotation",e),w(this,"scale",e),w(this,"userData",e.userData),w(this,"visible",e),q(this,"props",e),this.$emit("created",e),this.lookAt&&e.lookAt((t=this.lookAt.x)!=null?t:0,this.lookAt.y,this.lookAt.z),u(()=>this.lookAt,r=>{var s;e.lookAt((s=r.x)!=null?s:0,r.y,r.z)},{deep:!0}),this.parent=this.getParent(),this.disableAdd||(this.addToParent()?this.$emit("ready",this):console.error("Missing parent (Scene, Group...)"))},getParent(){let e=this.$parent;if(!e){const t=Ht();t&&t.parent&&(e=t.parent.ctx)}for(;e;){if(e.add)return e;e=e.$parent}},addToParent(e){const t=e||this.o3d;return this.parent?(this.parent.add(t),!0):!1},removeFromParent(e){const t=e||this.o3d;return this.parent?(this.parent.remove(t),!0):!1},add(e){var t;(t=this.o3d)==null||t.add(e)},remove(e){var t;(t=this.o3d)==null||t.remove(e)}},render(){return this.$slots.default?this.$slots.default():[]},__hmrId:"Object3D"});o({name:"Group",extends:W,setup(){return{group:new Vt}},created(){this.initObject3D(this.group)},__hmrId:"Group"});const Q=()=>{};o({name:"Raycaster",props:{onPointerEnter:{type:Function,default:Q},onPointerOver:{type:Function,default:Q},onPointerMove:{type:Function,default:Q},onPointerLeave:{type:Function,default:Q},onClick:{type:Function,default:Q},intersectMode:{type:String,default:"move"},intersectRecursive:{type:Boolean,default:!1}},setup(){return{renderer:X(U)}},mounted(){if(!this.renderer){console.error("Renderer not found");return}const e=this.renderer;this.renderer.onMounted(()=>{!e.camera||(this.pointer=je({camera:e.camera,domElement:e.canvas,intersectObjects:()=>e.scene?e.scene.children:[],intersectRecursive:this.intersectRecursive,onIntersectEnter:this.onPointerEnter,onIntersectOver:this.onPointerOver,onIntersectMove:this.onPointerMove,onIntersectLeave:this.onPointerLeave,onIntersectClick:this.onClick}),this.pointer.addListeners(),this.intersectMode==="frame"&&e.onBeforeRender(this.pointer.intersect))})},unmounted(){var e;this.pointer&&(this.pointer.removeListeners(),(e=this.renderer)==null||e.offBeforeRender(this.pointer.intersect))},render(){return[]},__hmrId:"Raycaster"});o({extends:W,props:{cubeRTSize:{type:Number,default:256},cubeCameraNear:{type:Number,default:.1},cubeCameraFar:{type:Number,default:2e3},autoUpdate:Boolean,hideMeshes:{type:Array,default:()=>[]}},setup(e){const t=X(U);if(!t||!t.scene)return console.error("Missing Renderer / Scene"),{};const r=t.renderer,s=t.scene,i=new qt(e.cubeRTSize,{format:Wt,generateMipmaps:!0,minFilter:Xt}),a=new Zt(e.cubeCameraNear,e.cubeCameraFar,i),n=()=>{e.hideMeshes.forEach(m=>{m.visible=!1}),a.update(r,s),e.hideMeshes.forEach(m=>{m.visible=!0})};return e.autoUpdate?(t.onBeforeRender(n),Kt(()=>{t.offBeforeRender(n)})):t.onMounted(n),{cubeRT:i,cubeCamera:a,updateRT:n}},created(){this.cubeCamera&&this.initObject3D(this.cubeCamera)},render(){return[]},__hmrId:"CubeCamera"});const ue=Symbol("Mesh"),ee=o({name:"Mesh",extends:W,props:{castShadow:Boolean,receiveShadow:Boolean},setup(){return{}},provide(){return{[ue]:this}},mounted(){!this.mesh&&!this.loading&&this.initMesh()},methods:{initMesh(){const e=new Yt(this.geometry,this.material);w(this,"castShadow",e),w(this,"receiveShadow",e),this.mesh=e,this.initObject3D(e)},createGeometry(){},addGeometryWatchers(e){Object.keys(e).forEach(t=>{u(()=>this[t],()=>{this.refreshGeometry()})})},setGeometry(e){this.geometry=e,this.mesh&&(this.mesh.geometry=e)},setMaterial(e){this.material=e,this.mesh&&(this.mesh.material=e)},refreshGeometry(){const e=this.geometry;this.createGeometry(),this.mesh&&this.geometry&&(this.mesh.geometry=this.geometry),e==null||e.dispose()}},unmounted(){this.geometry&&this.geometry.dispose(),this.material&&this.material.dispose()},__hmrId:"Mesh"});function C(e,t,r){return o({name:e,extends:ee,props:t,created(){this.createGeometry(),this.addGeometryWatchers(t)},methods:{createGeometry(){this.geometry=r(this)}}})}const Ie=o({emits:["created"],props:{rotateX:Number,rotateY:Number,rotateZ:Number,attributes:{type:Array,default:()=>[]}},inject:{mesh:ue},setup(){return{}},created(){if(!this.mesh){console.error("Missing parent Mesh");return}this.createGeometry(),this.rotateGeometry(),this.geometry&&this.mesh.setGeometry(this.geometry),Object.keys(this.$props).forEach(e=>{u(()=>this[e],this.refreshGeometry)})},unmounted(){var e;(e=this.geometry)==null||e.dispose()},methods:{createGeometry(){const e={},t=new Jt;this.attributes.forEach(r=>{if(r.name&&r.itemSize&&r.array){const s=e[r.name]=new Qt(r.array,r.itemSize,r.normalized);t.setAttribute(r.name,s)}}),t.computeBoundingBox(),t.userData.component=this,this.geometry=t,this.$emit("created",t)},rotateGeometry(){!this.geometry||(this.rotateX&&this.geometry.rotateX(this.rotateX),this.rotateY&&this.geometry.rotateY(this.rotateY),this.rotateZ&&this.geometry.rotateZ(this.rotateZ))},refreshGeometry(){const e=this.geometry;this.createGeometry(),this.rotateGeometry(),this.geometry&&this.mesh&&this.mesh.setGeometry(this.geometry),e==null||e.dispose()}},render(){return[]}});function v(e,t,r){return o({name:e,extends:Ie,props:t,methods:{createGeometry(){this.geometry=r(this),this.geometry.userData.component=this,this.$emit("created",this.geometry)}}})}const Ae={size:Number,width:{type:Number,default:1},height:{type:Number,default:1},depth:{type:Number,default:1},widthSegments:{type:Number,default:1},heightSegments:{type:Number,default:1},depthSegments:{type:Number,default:1}};function Fe(e){return e.size?new Me(e.size,e.size,e.size,e.widthSegments,e.heightSegments,e.depthSegments):new Me(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}v("BoxGeometry",Ae,Fe);const Be={radius:{type:Number,default:1},segments:{type:Number,default:8},thetaStart:{type:Number,default:0},thetaLength:{type:Number,default:Math.PI*2}};function De(e){return new er(e.radius,e.segments,e.thetaStart,e.thetaLength)}v("CircleGeometry",Be,De);const Te={radius:{type:Number,default:1},height:{type:Number,default:1},radialSegments:{type:Number,default:8},heightSegments:{type:Number,default:1},openEnded:{type:Boolean,default:!1},thetaStart:{type:Number,default:0},thetaLength:{type:Number,default:Math.PI*2}};function Ue(e){return new tr(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}v("ConeGeometry",Te,Ue);const He={radiusTop:{type:Number,default:1},radiusBottom:{type:Number,default:1},height:{type:Number,default:1},radialSegments:{type:Number,default:8},heightSegments:{type:Number,default:1},openEnded:{type:Boolean,default:!1},thetaStart:{type:Number,default:0},thetaLength:{type:Number,default:Math.PI*2}};function Ve(e){return new rr(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}v("CylinderGeometry",He,Ve);const qe={radius:{type:Number,default:1},detail:{type:Number,default:0}};function We(e){return new sr(e.radius,e.detail)}v("DodecahedronGeometry",qe,We);const ms={shapes:{type:[Object,Array]},options:{type:Object}};function ps(e){return new ir(e.shapes,e.options)}v("ExtrudeGeometry",ms,ps);const Xe={radius:{type:Number,default:1},detail:{type:Number,default:0}};function Ze(e){return new nr(e.radius,e.detail)}v("IcosahedronGeometry",Xe,Ze);const Ke={points:Array,segments:{type:Number,default:12},phiStart:{type:Number,default:0},phiLength:{type:Number,default:Math.PI*2}};function Ye(e){return new ar(e.points,e.segments,e.phiStart,e.phiLength)}v("LatheGeometry",Ke,Ye);const Je={radius:{type:Number,default:1},detail:{type:Number,default:0}};function Qe(e){return new or(e.radius,e.detail)}v("OctahedronGeometry",Je,Qe);const et={width:{type:Number,default:1},height:{type:Number,default:1},widthSegments:{type:Number,default:1},heightSegments:{type:Number,default:1}};function tt(e){return new Ne(e.width,e.height,e.widthSegments,e.heightSegments)}v("PlaneGeometry",et,tt);const rt={vertices:Array,indices:Array,radius:{type:Number,default:1},detail:{type:Number,default:0}};function st(e){return new hr(e.vertices,e.indices,e.radius,e.detail)}v("PolyhedronGeometry",rt,st);const it={innerRadius:{type:Number,default:.5},outerRadius:{type:Number,default:1},thetaSegments:{type:Number,default:8},phiSegments:{type:Number,default:1},thetaStart:{type:Number,default:0},thetaLength:{type:Number,default:Math.PI*2}};function nt(e){return new dr(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}v("RingGeometry",it,nt);const at={radius:{type:Number,default:1},widthSegments:{type:Number,default:12},heightSegments:{type:Number,default:12},phiStart:{type:Number,default:0},phiLength:{type:Number,default:Math.PI*2},thetaStart:{type:Number,default:0},thetaLength:{type:Number,default:Math.PI}};function ot(e){return new ur(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}v("SphereGeometry",at,ot);const gs={shapes:{type:[Object,Array]},curveSegments:{type:Number}};function ys(e){return new cr(e.shapes,e.curveSegments)}v("ShapeGeometry",gs,ys);const ht={radius:{type:Number,default:1},detail:{type:Number,default:0}};function dt(e){return new lr(e.radius,e.detail)}v("TetrahedronGeometry",ht,dt);const ut={radius:{type:Number,default:1},tube:{type:Number,default:.4},radialSegments:{type:Number,default:8},tubularSegments:{type:Number,default:6},arc:{type:Number,default:Math.PI*2}};function ct(e){return new fr(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}v("TorusGeometry",ut,ct);const lt={radius:{type:Number,default:1},tube:{type:Number,default:.4},tubularSegments:{type:Number,default:64},radialSegments:{type:Number,default:8},p:{type:Number,default:2},q:{type:Number,default:3}};function ft(e){return new mr(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}v("TorusKnotGeometry",lt,ft);const be={points:Array,path:pr,tubularSegments:{type:Number,default:64},radius:{type:Number,default:1},radialSegments:{type:Number,default:8},closed:{type:Boolean,default:!1}};function mt(e){let t;return e.points?t=new Oe(e.points):e.path?t=e.path:console.error("Missing path curve or points."),new gr(t,e.tubularSegments,e.radius,e.radiusSegments,e.closed)}o({extends:Ie,props:be,methods:{createGeometry(){this.geometry=mt(this)},updatePoints(e){pt(this.geometry,e)}}});function pt(e,t){const r=new Oe(t),{radialSegments:s,radius:i,tubularSegments:a,closed:n}=e.parameters,m=r.computeFrenetFrames(a,n);e.tangents=m.tangents,e.normals=m.normals,e.binormals=m.binormals,e.parameters.path=r;const S=e.getAttribute("position"),x=e.getAttribute("normal"),f=new ie,_=new ie;for(let b=0;b<a;b++)M(b);M(a),e.attributes.position.needsUpdate=!0,e.attributes.normal.needsUpdate=!0;function M(b){r.getPointAt(b/a,_);const A=m.normals[b],F=m.binormals[b];for(let p=0;p<=s;p++){const y=p/s*Math.PI*2,E=Math.sin(y),h=-Math.cos(y);f.x=h*A.x+E*F.x,f.y=h*A.y+E*F.y,f.z=h*A.z+E*F.z,f.normalize();const c=b*(s+1)+p;x.setXYZ(c,f.x,f.y,f.z),S.setXYZ(c,_.x+i*f.x,_.y+i*f.y,_.z+i*f.z)}}}var K=o({extends:W,name:"Light",props:{color:{type:String,default:"#ffffff"},intensity:{type:Number,default:1},castShadow:{type:Boolean,default:!1},shadowMapSize:{type:Object,default:()=>({x:512,y:512})},shadowCamera:{type:Object,default:()=>({})}},setup(){return{}},unmounted(){(this.light instanceof me||this.light instanceof pe)&&this.removeFromParent(this.light.target)},methods:{initLight(e){this.light=e,e.shadow&&(e.castShadow=this.castShadow,he(e.shadow.mapSize,this.shadowMapSize),he(e.shadow.camera,this.shadowCamera)),["color","intensity","castShadow"].forEach(t=>{u(()=>this[t],r=>{t==="color"?e.color.set(r):e[t]=r})}),this.initObject3D(e),(e instanceof me||e instanceof pe)&&(w(this,"target",e.target,"position"),this.addToParent(e.target))}},__hmrId:"Light"}),bs=o({extends:K,created(){this.initLight(new yr(this.color,this.intensity))},__hmrId:"AmbientLight"});o({extends:K,props:{target:{type:Object,default:()=>({x:0,y:0,z:0})}},created(){this.initLight(new pe(this.color,this.intensity))},__hmrId:"DirectionalLight"});o({extends:K,props:{groundColor:{type:String,default:"#444444"}},created(){const e=new br(this.color,this.groundColor,this.intensity);u(()=>this.groundColor,t=>{e.groundColor.set(t)}),this.initLight(e)},__hmrId:"HemisphereLight"});var vs=o({extends:K,props:{distance:{type:Number,default:0},decay:{type:Number,default:1}},created(){this.initLight(new vr(this.color,this.intensity,this.distance,this.decay))},__hmrId:"PointLight"});o({extends:K,props:{width:{type:Number,default:10},height:{type:Number,default:10},helper:Boolean},created(){wr.init();const e=new Sr(this.color,this.intensity,this.width,this.height);if(["width","height"].forEach(r=>{u(()=>this[r],s=>{e[r]=s})}),this.helper){const r=new xr(e);e.add(r)}this.initLight(e)},__hmrId:"RectAreaLight"});o({extends:K,props:{angle:{type:Number,default:Math.PI/3},decay:{type:Number,default:1},distance:{type:Number,default:0},penumbra:{type:Number,default:0},target:Object},created(){const e=new me(this.color,this.intensity,this.distance,this.angle,this.penumbra,this.decay);["angle","decay","distance","penumbra"].forEach(r=>{u(()=>this[r],s=>{e[r]=s})}),this.initLight(e)},__hmrId:"SpotLight"});const gt=Symbol("Material"),yt=o({emits:["created"],props:{color:{type:String,default:"#ffffff"},props:{type:Object,default:()=>({})}},inject:{mesh:ue},setup(){return{}},provide(){return{[gt]:this}},created(){if(!this.mesh){console.error("Missing parent Mesh");return}if(this.createMaterial){const e=this.material=this.createMaterial();u(()=>this.color,t=>{e.color.set(t)}),q(this,"props",e,!1,this.setProp),this.$emit("created",e),this.mesh.setMaterial(e)}},unmounted(){var e;(e=this.material)==null||e.dispose()},methods:{getMaterialParams(){return z(z({},ye(this.$props,["props"])),this.props)},setProp(e,t,r,s=!1){const i=e[t];i instanceof V?i.set(r):e[t]=r,e.needsUpdate=s},setTexture(e,t="map"){this.setProp(this.material,t,e,!0)}},render(){return this.$slots.default?this.$slots.default():[]},__hmrId:"Material"});function $(e,t,r){return o({name:e,extends:yt,props:t,methods:{createMaterial(){return r(this.getMaterialParams())}}})}$("BasicMaterial",{props:{type:Object,default:()=>({})}},e=>new ze(e));const ws=$("LambertMaterial",{props:{type:Object,default:()=>({})}},e=>new Pr(e));$("PhongMaterial",{props:{type:Object,default:()=>({})}},e=>new Cr(e));$("PhysicalMaterial",{props:{type:Object,default:()=>({})}},e=>new Lr(e));$("PointsMaterial",{props:{type:Object,default:()=>({})}},e=>new _r(e));$("ShadowMaterial",{color:{type:String,default:"#000000"},props:{type:Object,default:()=>({})}},e=>new Mr(e));$("StandardMaterial",{props:{type:Object,default:()=>({})}},e=>new Nr(e));$("ToonMaterial",{props:{type:Object,default:()=>({})}},e=>new Or(e));$("MatcapMaterial",{src:String,name:{type:String,default:"0404E8_0404B5_0404CB_3333FC"}},e=>{const t=e.src?e.src:as(e.name),r=ye(e,["src","name"]);return r.matcap=new ne().load(t),new zr(r)});const Ss=`
  varying vec2 vUv;
  void main(){
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);
  }
`,xs=`
  varying vec2 vUv;
  void main() {
    gl_FragColor = vec4(vUv.x, vUv.y, 0., 1.0);
  }
`;$("ShaderMaterial",{props:{type:Object,default:()=>({uniforms:{},vertexShader:Ss,fragmentShader:xs})}},e=>new ge(ye(e,["color"])));function Ps(e,t,r){return e.split(t).join(r)}const Cs=Z.meshphong_frag.slice(0,Z.meshphong_frag.indexOf("void main() {")),Ls=Z.meshphong_frag.slice(Z.meshphong_frag.indexOf("void main() {")),_s={uniforms:Ee.merge([Er.phong.uniforms,{thicknessColor:{value:new V(16777215)},thicknessDistortion:{value:.1},thicknessAmbient:{value:0},thicknessAttenuation:{value:.1},thicknessPower:{value:2},thicknessScale:{value:10}}]),vertexShader:`
    #define USE_UV
    ${Z.meshphong_vert}
  `,fragmentShader:`
    #define USE_UV
    #define SUBSURFACE

    ${Cs}

    uniform float thicknessPower;
    uniform float thicknessScale;
    uniform float thicknessDistortion;
    uniform float thicknessAmbient;
    uniform float thicknessAttenuation;
    uniform vec3 thicknessColor;

    void RE_Direct_Scattering(const in IncidentLight directLight, const in vec2 uv, const in GeometricContext geometry, inout ReflectedLight reflectedLight) {
      #ifdef USE_COLOR
        vec3 thickness = vColor * thicknessColor;
      #else
        vec3 thickness = thicknessColor;
      #endif
      vec3 scatteringHalf = normalize(directLight.direction + (geometry.normal * thicknessDistortion));
      float scatteringDot = pow(saturate(dot(geometry.viewDir, -scatteringHalf)), thicknessPower) * thicknessScale;
      vec3 scatteringIllu = (scatteringDot + thicknessAmbient) * thickness;
      reflectedLight.directDiffuse += scatteringIllu * thicknessAttenuation * directLight.color;
    }
  `+Ls.replace("#include <lights_fragment_begin>",Ps(Z.lights_fragment_begin,"RE_Direct( directLight, geometry, material, reflectedLight );",`
        RE_Direct( directLight, geometry, material, reflectedLight );
        #if defined( SUBSURFACE ) && defined( USE_UV )
          RE_Direct_Scattering(directLight, vUv, geometry, reflectedLight);
        #endif
      `))};o({extends:yt,props:{uniforms:{type:Object,default:()=>({diffuse:"#ffffff",thicknessColor:"#ffffff",thicknessDistortion:.4,thicknessAmbient:.01,thicknessAttenuation:.7,thicknessPower:2,thicknessScale:4})}},methods:{createMaterial(){const e=_s,t=Ee.clone(e.uniforms);return q(this,"uniforms",t,!0,(s,i,a)=>{const n=s[i].value;n instanceof V?n.set(a):s[i].value=a}),new ge(J(z(J(z({},e),{lights:!0}),this.props),{uniforms:t}))}}});var bt=o({inject:{material:gt},props:{name:{type:String,default:"map"},uniform:String,src:String,onLoad:Function,onProgress:Function,onError:Function,props:{type:Object,default:()=>({})}},setup(){return{}},created(){this.refreshTexture(),u(()=>this.src,this.refreshTexture)},unmounted(){var e,t;(e=this.material)==null||e.setTexture(null,this.name),(t=this.texture)==null||t.dispose()},methods:{createTexture(){if(!!this.src)return new ne().load(this.src,this.onLoaded,this.onProgress,this.onError)},initTexture(){!this.texture||(q(this,"props",this.texture),!!this.material&&(this.material.setTexture(this.texture,this.name),this.material.material instanceof ge&&this.uniform&&(this.material.material.uniforms[this.uniform]={value:this.texture})))},refreshTexture(){var e;(e=this.texture)==null||e.dispose(),this.texture=this.createTexture(),this.initTexture()},onLoaded(e){var t;(t=this.onLoad)==null||t.call(this,e)}},render(){return[]}});o({extends:bt,props:{name:{type:String,default:"envMap"},path:{type:String,required:!0},urls:{type:Array,default:()=>["px.jpg","nx.jpg","py.jpg","ny.jpg","pz.jpg","nz.jpg"]},props:{type:Object,default:()=>({mapping:kr})}},created(){u(()=>this.path,this.refreshTexture),u(()=>this.urls,this.refreshTexture)},methods:{createTexture(){return new Rr().setPath(this.path).load(this.urls,this.onLoaded,this.onProgress,this.onError)}}});o({extends:bt,props:{videoId:{type:String,required:!0}},created(){u(()=>this.videoId,this.refreshTexture)},methods:{createTexture(){const e=document.getElementById(this.videoId);return new jr(e)}}});var Ms=C("Box",Ae,Fe);C("Circle",Be,De);C("Cone",Te,Ue);C("Cylinder",He,Ve);C("Dodecahedron",qe,We);C("Icosahedron",Xe,Ze);C("Lathe",Ke,Ye);C("Octahedron",Je,Qe);C("Plane",et,tt);C("Polyhedron",rt,st);C("Ring",it,nt);C("Sphere",at,ot);C("Tetrahedron",ht,dt);const Ns={text:{type:String,required:!0,default:"Text"},fontSrc:{type:String,required:!0},size:{type:Number,default:80},height:{type:Number,default:5},depth:{type:Number,default:1},curveSegments:{type:Number,default:12},bevelEnabled:{type:Boolean,default:!1},bevelThickness:{type:Number,default:10},bevelSize:{type:Number,default:8},bevelOffset:{type:Number,default:0},bevelSegments:{type:Number,default:5},align:{type:[Boolean,String],default:!1}};var Os=o({extends:ee,props:Ns,setup(){return{}},created(){if(!this.fontSrc){console.error('Missing required prop: "font-src"');return}["text","size","height","curveSegments","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","align"].forEach(r=>{u(()=>this[r],()=>{this.font&&this.refreshGeometry()})});const t=new Gr;this.loading=!0,t.load(this.fontSrc,r=>{this.loading=!1,this.font=r,this.createGeometry(),this.initMesh()})},methods:{createGeometry(){this.geometry=new $r(this.text,{font:this.font,size:this.size,height:this.height,depth:this.depth,curveSegments:this.curveSegments,bevelEnabled:this.bevelEnabled,bevelThickness:this.bevelThickness,bevelSize:this.bevelSize,bevelOffset:this.bevelOffset,bevelSegments:this.bevelSegments}),this.align==="center"&&this.geometry.center()}}});C("Torus",ut,ct);C("TorusKnot",lt,ft);o({extends:ee,props:be,created(){this.createGeometry(),this.addGeometryWatchers(be)},methods:{createGeometry(){this.geometry=mt(this)},updatePoints(e){pt(this.geometry,e)}},__hmrId:"Tube"});o({emits:["loaded"],extends:ee,props:{src:{type:String,required:!0},width:Number,height:Number,widthSegments:{type:Number,default:1},heightSegments:{type:Number,default:1},keepSize:Boolean},setup(){return{}},created(){!this.renderer||(this.geometry=new Ne(1,1,this.widthSegments,this.heightSegments),this.material=new ze({side:Ir,map:this.loadTexture()}),u(()=>this.src,this.refreshTexture),["width","height"].forEach(e=>{u(()=>this[e],this.resize)}),this.resize(),this.keepSize&&this.renderer.onResize(this.resize))},unmounted(){var e;(e=this.renderer)==null||e.offResize(this.resize)},methods:{loadTexture(){return new ne().load(this.src,this.onLoaded)},refreshTexture(){var e;(e=this.texture)==null||e.dispose(),this.material&&(this.material.map=this.loadTexture(),this.material.needsUpdate=!0)},onLoaded(e){this.texture=e,this.resize(),this.$emit("loaded",e)},resize(){if(!this.renderer||!this.texture)return;const e=this.renderer.size,t=this.texture.image.width,r=this.texture.image.height,s=t/r;let i=1,a=1;this.width&&this.height?(i=this.width*e.wWidth/e.width,a=this.height*e.wHeight/e.height):this.width?(i=this.width*e.wWidth/e.width,a=i/s):this.height?(a=this.height*e.wHeight/e.height,i=a*s):s>1?i=a*s:a=i/s,this.mesh&&(this.mesh.scale.x=i,this.mesh.scale.y=a)}},__hmrId:"Image"});o({extends:ee,props:{count:{type:Number,required:!0}},methods:{initMesh(){if(!!this.renderer){if(!this.geometry||!this.material)return console.error("Missing geometry and/or material"),!1;this.mesh=new fe(this.geometry,this.material,this.count),this.mesh.userData.component=this,w(this,"castShadow",this.mesh),w(this,"receiveShadow",this.mesh),(this.onPointerEnter||this.onPointerOver||this.onPointerMove||this.onPointerLeave||this.onPointerDown||this.onPointerUp||this.onClick)&&this.renderer.three.addIntersectObject(this.mesh),this.initObject3D(this.mesh)}}},__hmrId:"InstancedMesh"});o({extends:W,emits:["loaded"],props:{src:{type:String,required:!0}},setup(){return{}},created(){this.texture=new ne().load(this.src,this.onLoaded),this.material=new Ar({map:this.texture}),this.sprite=new Fr(this.material),this.initObject3D(this.sprite)},unmounted(){var e,t;(e=this.texture)==null||e.dispose(),(t=this.material)==null||t.dispose()},methods:{onLoaded(){this.updateUV(),this.$emit("loaded")},updateUV(){if(!this.texture||!this.sprite)return;const e=this.texture.image.width,t=this.texture.image.height,r=e/t;let s=.5,i=.5;r>1?s=.5*r:i=.5/r;const a=this.sprite.geometry.attributes.position.array;a[0]=-s,a[1]=-i,a[5]=s,a[6]=-i,a[10]=s,a[11]=i,a[15]=-s,a[16]=i,this.sprite.geometry.attributes.position.needsUpdate=!0}},__hmrId:"Sprite"});o({extends:W,setup(){return{}},provide(){return{[ue]:this}},mounted(){this.mesh=this.points=new Br(this.geometry,this.material),this.initObject3D(this.mesh)},methods:{setGeometry(e){this.geometry=e,this.mesh&&(this.mesh.geometry=e)},setMaterial(e){this.material=e,this.mesh&&(this.mesh.material=e)}}});var vt=o({extends:W,emits:["before-load","load","progress","error"],props:{src:{type:String,required:!0}},data(){return{progress:0}},methods:{onLoad(e){this.$emit("load",e)},onProgress(e){this.progress=e.loaded/e.total,this.$emit("progress",e)},onError(e){this.$emit("error",e)}}}),zs=o({extends:vt,props:{dracoPath:{type:String,required:!0}},created(){const e=new Dr;if(this.dracoPath){const t=new Tr;t.setDecoderPath(this.dracoPath),e.setDRACOLoader(t)}this.$emit("before-load",e),e.load(this.src,t=>{this.onLoad(t),this.initObject3D(t.scene)},this.onProgress,this.onError)}});o({extends:vt,created(){const e=new Ur;this.$emit("before-load",e),e.load(this.src,t=>{this.onLoad(t),this.initObject3D(t)},this.onProgress,this.onError)}});const wt=Symbol("Composer");var Es=o({setup(){return{renderer:X(U)}},provide(){return{[wt]:this}},created(){if(!this.renderer){console.error("Renderer not found");return}const e=this.renderer,t=new Hr(this.renderer.renderer);this.composer=t,this.renderer.composer=t,e.addListener("init",()=>{e.renderer.autoClear=!1,this.resize(),e.addListener("resize",this.resize)})},unmounted(){var e;(e=this.renderer)==null||e.removeListener("resize",this.resize)},methods:{addPass(e){var t;(t=this.composer)==null||t.addPass(e)},removePass(e){var t;(t=this.composer)==null||t.removePass(e)},resize(){this.composer&&this.renderer&&this.composer.setSize(this.renderer.size.width,this.renderer.size.height)}},render(){return this.$slots.default?this.$slots.default():[]},__hmrId:"EffectComposer"}),I=o({inject:{renderer:U,composer:wt},emits:["ready"],setup(){return{}},created(){this.composer||console.error("Missing parent EffectComposer"),this.renderer||console.error("Missing parent Renderer")},unmounted(){var e,t,r;this.pass&&((e=this.composer)==null||e.removePass(this.pass),(r=(t=this.pass).dispose)==null||r.call(t))},methods:{initEffectPass(e){var t;this.pass=e,(t=this.composer)==null||t.addPass(e),this.$emit("ready",e)}},render(){return[]},__hmrId:"EffectPass"}),ks=o({extends:I,created(){if(!this.renderer)return;if(!this.renderer.scene){console.error("Missing Scene");return}if(!this.renderer.camera){console.error("Missing Camera");return}const e=new Vr(this.renderer.scene,this.renderer.camera);this.initEffectPass(e)},__hmrId:"RenderPass"});const St={focus:{type:Number,default:1},aperture:{type:Number,default:.025},maxblur:{type:Number,default:.01}};o({extends:I,props:St,created(){if(!this.renderer)return;if(!this.renderer.scene){console.error("Missing Scene");return}if(!this.renderer.camera){console.error("Missing Camera");return}const e={focus:this.focus,aperture:this.aperture,maxblur:this.maxblur,width:this.renderer.size.width,height:this.renderer.size.height},t=new qr(this.renderer.scene,this.renderer.camera,e);Object.keys(St).forEach(r=>{u(()=>this[r],s=>{t.uniforms[r].value=s})}),this.initEffectPass(t)},__hmrId:"BokehPass"});const xt={noiseIntensity:{type:Number,default:.5},scanlinesIntensity:{type:Number,default:.05},scanlinesCount:{type:Number,default:4096},grayscale:{type:Number,default:0}};o({extends:I,props:xt,created(){const e=new Wr(this.noiseIntensity,this.scanlinesIntensity,this.scanlinesCount,this.grayscale);Object.keys(xt).forEach(t=>{u(()=>this[t],r=>{e.uniforms[t].value=r})}),this.initEffectPass(e)},__hmrId:"FilmPass"});var Rs=o({extends:I,created(){var t;const e=new ae(Xr);(t=this.renderer)==null||t.addListener("resize",this.resize),this.initEffectPass(e)},unmounted(){var e;(e=this.renderer)==null||e.removeListener("resize",this.resize)},methods:{resize({size:e}){if(this.pass){const{resolution:t}=this.pass.material.uniforms;t.value.x=1/e.width,t.value.y=1/e.height}}},__hmrId:"FXAAPass"});const Pt={shape:{type:Number,default:1},radius:{type:Number,default:4},rotateR:{type:Number,default:Math.PI/12*1},rotateG:{type:Number,default:Math.PI/12*2},rotateB:{type:Number,default:Math.PI/12*3},scatter:{type:Number,default:0}};o({extends:I,props:Pt,created(){if(!this.renderer)return;const e=new Zr(this.renderer.size.width,this.renderer.size.height,{});Object.keys(Pt).forEach(t=>{e.uniforms[t].value=this[t],u(()=>this[t],r=>{e.uniforms[t].value=r})}),this.initEffectPass(e)},__hmrId:"HalftonePass"});o({extends:I,created(){if(!this.renderer)return;const e=new Kr(this.renderer.size.width,this.renderer.size.height);this.initEffectPass(e)},__hmrId:"SMAAPass"});o({extends:I,props:{options:{type:Object,default:()=>({})}},created(){if(!this.renderer)return;if(!this.renderer.scene){console.error("Missing Scene");return}if(!this.renderer.camera){console.error("Missing Camera");return}const e=new Yr(this.renderer.scene,this.renderer.camera,this.renderer.size.width,this.renderer.size.height);Object.keys(this.options).forEach(t=>{e[t]=this.options[t]}),this.initEffectPass(e)},__hmrId:"SSAOPass"});var Ct={uniforms:{},vertexShader:`
    varying vec2 vUv;
    void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  `,fragmentShader:`
    varying vec2 vUv;
    void main() {
      gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);
    }
  `},Lt={uniforms:{tDiffuse:{value:null},blurRadius:{value:0},gradientRadius:{value:0},start:{value:new T},end:{value:new T},delta:{value:new T},texSize:{value:new T}},vertexShader:Ct.vertexShader,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float blurRadius;
    uniform float gradientRadius;
    uniform vec2 start;
    uniform vec2 end;
    uniform vec2 delta;
    uniform vec2 texSize;
    varying vec2 vUv;

    float random(vec3 scale, float seed) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
    }

    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;

      /* randomize the lookup values to hide the fixed number of samples */
      float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);

      vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));
      float radius = smoothstep(0.0, 1.0, abs(dot(vUv * texSize - start, normal)) / gradientRadius) * blurRadius;
      for (float t = -30.0; t <= 30.0; t++) {
          float percent = (t + offset - 0.5) / 30.0;
          float weight = 1.0 - abs(percent);
          vec4 texel = texture2D(tDiffuse, vUv + delta / texSize * percent * radius);
          // vec4 texel2 = texture2D(tDiffuse, vUv + vec2(-delta.y, delta.x) / texSize * percent * radius);

          /* switch to pre-multiplied alpha to correctly blur transparent images */
          texel.rgb *= texel.a;
          // texel2.rgb *= texel2.a;

          color += texel * weight;
          total += 2.0 * weight;
      }

      gl_FragColor = color / total;

      /* switch back from pre-multiplied alpha */
      gl_FragColor.rgb /= gl_FragColor.a + 0.00001;
    }
  `};const js={blurRadius:{type:Number,default:10},gradientRadius:{type:Number,default:100},start:{type:Object,default:()=>({x:0,y:100})},end:{type:Object,default:()=>({x:10,y:100})}};o({extends:I,props:js,setup(){return{uniforms1:{},uniforms2:{}}},created(){if(!this.composer)return;this.pass1=new ae(Lt),this.pass2=new ae(Lt);const e=this.uniforms1=this.pass1.uniforms,t=this.uniforms2=this.pass2.uniforms;t.blurRadius=e.blurRadius,t.gradientRadius=e.gradientRadius,t.start=e.start,t.end=e.end,t.texSize=e.texSize,w(this,"blurRadius",e.blurRadius,"value"),w(this,"gradientRadius",e.gradientRadius,"value"),this.updateFocusLine(),["start","end"].forEach(r=>{u(()=>this[r],this.updateFocusLine,{deep:!0})}),this.pass1.setSize=(r,s)=>{e.texSize.value.set(r,s)},this.initEffectPass(this.pass1),this.composer.addPass(this.pass2)},unmounted(){this.composer&&this.pass2&&this.composer.removePass(this.pass2)},methods:{updateFocusLine(){this.uniforms1.start.value.copy(this.start),this.uniforms1.end.value.copy(this.end);const e=new T().copy(this.end).sub(this.start).normalize();this.uniforms1.delta.value.copy(e),this.uniforms2.delta.value.set(-e.y,e.x)}},__hmrId:"TiltShiftPass"});const _t={strength:{type:Number,default:1.5},radius:{type:Number,default:0},threshold:{type:Number,default:0}};var Gs=o({extends:I,props:_t,created(){if(!this.renderer)return;const e=new T(this.renderer.size.width,this.renderer.size.height),t=new Jr(e,this.strength,this.radius,this.threshold);Object.keys(_t).forEach(r=>{u(()=>this[r],s=>{t.uniforms[r].value=s})}),this.initEffectPass(t)},__hmrId:"UnrealBloomPass"}),$s={uniforms:{tDiffuse:{value:null},center:{value:new T(.5,.5)},strength:{value:0}},vertexShader:Ct.vertexShader,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform vec2 center;
    uniform float strength;
    varying vec2 vUv;

    float random(vec3 scale, float seed) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
    }
    
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      vec2 toCenter = center - vUv;
      
      /* randomize the lookup values to hide the fixed number of samples */
      float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);
      
      for (float t = 0.0; t <= 40.0; t++) {
        float percent = (t + offset) / 40.0;
        float weight = 4.0 * (percent - percent * percent);
        vec4 texel = texture2D(tDiffuse, vUv + toCenter * percent * strength);

        /* switch to pre-multiplied alpha to correctly blur transparent images */
        texel.rgb *= texel.a;

        color += texel * weight;
        total += weight;
      }

      gl_FragColor = color / total;

      /* switch back from pre-multiplied alpha */
      gl_FragColor.rgb /= gl_FragColor.a + 0.00001;
    }
  `};o({extends:I,props:{center:{type:Object,default:()=>({x:.5,y:.5})},strength:{type:Number,default:.5}},created(){const e=new ae($s);w(this,"center",e.uniforms.center,"value"),w(this,"strength",e.uniforms.strength,"value"),this.initEffectPass(e)},__hmrId:"ZoomBlurPass"});var Is=(e,t)=>{const r=e.__vccOpts||e;for(const[s,i]of t)r[s]=i;return r};const As=o({components:{Box:Ms,Camera:cs,LambertMaterial:ws,PointLight:vs,Text:Os,Renderer:us,Scene:ls,GLTF:zs,EffectComposer:Es,FXAAPass:Rs,RenderPass:ks,UnrealBloomPass:Gs,AmbientLight:bs},data(){return{model:null,light:null,renderer:null}},setup(){return{onClickRaycaster:Qr(function(...t){const r=t[0].intersect,s=t[0].intersect.object.material;console.log("\u{1F680} - onClickRaycaster - target:",r.object,r.object.name),s&&(s.color=new V(31999)),window.alert("\u9009\u4E2D\u4E86"+r.object.name)},200)}},mounted(){const e=this.$refs.renderer,t=this.$refs.gltf;this.light=this.$refs.light.light,this.renderer=e,e.onMounted(()=>{console.log("\u{1F680} - mounted - gltf:",t)}),e.onMounted(()=>{console.log("\u{1F680} - mounted - gltf:",t)}),e.onBeforeRender(this.animate)},methods:{onClickModel(...e){},animate(){var t;const{pointer:e}=this.renderer.three;this.light&&((t=this.light)==null||t.position.copy(e.positionV3))},setHightLight(){var e;(e=this.model.scene)==null||e.traverse(t=>{t.material&&(console.log("\u{1F680} - this.model.scene?.traverse - object.material:",t.material),console.log("\u{1F680} - object.uuid:",t.uuid),t.material.color=new V(31999))})},onReady(e){var t;this.model=e,console.log("\u{1F680} - onReady - model:",e),(t=e.scene)==null||t.traverse(()=>{})},gltfOver({over:e}){console.log("\u{1F680} - gltfOver - over:",e)},gltfClick(...e){alert("Click"),console.log(e)}}}),Fs={class:"button-wrapper"},Bs=N("br",null,null,-1),Ds=N("br",null,null,-1),Ts=N("br",null,null,-1),Us=ke(" \u70B9\u51FB\u6784\u4EF6\u53D8\u8272\u3001\u5C55\u793A\u6784\u4EF6name "),Hs=N("br",null,null,-1),Vs=N("br",null,null,-1),qs=N("div",null," ReachMe: yaolinhong1024@gmail.com ",-1),Ws=N("br",null,null,-1),Xs=N("br",null,null,-1),Zs=N("div",null,[ke(" github: "),N("a",{href:"https://github.com/yaolinhong",target:"_blank"},"https://github.com/yaolinhong")],-1);function Ks(e,t,r,s,i,a){const n=j("Camera"),m=j("PhongMaterial"),S=j("Text"),x=j("AmbientLight"),f=j("SpotLight"),_=j("PointLight"),M=j("LambertMaterial"),b=j("GLTF"),A=j("Scene"),F=j("Renderer");return ts(),es(F,{"orbit-ctrl":{enableDamping:!0,dampingFactor:.05},style:{position:"relative"},ref:"renderer",pointer:{intersectRecursive:!0},onClick:e.onClickModel,resize:"window"},{default:oe(()=>[N("div",Fs,[Bs,N("button",{onClick:t[0]||(t[0]=(...p)=>e.setHightLight&&e.setHightLight(...p))},"\u5168\u90E8\u6784\u4EF6\u53D8\u8272"),Ds,Ts,Us,Hs,Vs,qs,Ws,Xs,Zs]),G(n,{position:{x:100,y:50,z:200}}),G(A,null,{default:oe(()=>[G(S,{text:"Hello Revit","font-src":"./assets/models/font.json",align:"center",size:20,height:5,position:{x:0,y:50,z:0},"cast-shadow":!0},{default:oe(()=>[G(m)]),_:1}),G(x,{color:"#aaaaaa"}),G(f,{color:"#aaaaaa",intensity:.5,position:{x:0,y:1,z:2},angle:Math.PI/3,penumbra:.5,"cast-shadow":"","shadow-map-size":{width:1024,height:1024}},null,8,["intensity","angle","penumbra"]),G(f,{color:"#ff0000",intensity:.5,position:{x:0,y:-1,z:2},angle:Math.PI/3,penumbra:.5,"cast-shadow":"","shadow-map-size":{width:1024,height:1024}},null,8,["intensity","angle","penumbra"]),G(_,{ref:"light",distance:"8000",decay:"200",color:"#fff"},null,512),G(b,{onClick:e.onClickRaycaster,onLoad:e.onReady,ref:"gltf",dracoPath:"./assets/models/revit.glb",src:"./assets/models/revit.glb"},{default:oe(()=>[G(M)]),_:1},8,["onClick","onLoad"])]),_:1})]),_:1},8,["orbit-ctrl","onClick"])}var Ys=Is(As,[["render",Ks]]);const Js=rs(Ys);Js.mount("#app");
